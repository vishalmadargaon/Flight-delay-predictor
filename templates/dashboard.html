{% extends "base.html" %}

{% block content %}
<div class="dashboard-container">
    <div class="dashboard-header">
        <h1><i class="fas fa-tachometer-alt"></i> Prediction Dashboard</h1>
        <p>Your flight delay prediction history</p>
    </div>

    {% if predictions %}
    <div class="predictions-grid">
        {% for prediction in predictions %}
        <div class="prediction-card">
            <div class="prediction-header">
                <h3>Prediction #{{ prediction.id }}</h3>
                <span class="prediction-date">
                    <i class="fas fa-calendar"></i>
                    {{ prediction.created_at }}
                </span>
            </div>
            
            <div class="prediction-data">
                <div class="data-row">
                    <span>Carrier:</span>
                    <strong>{{ prediction.input_data.carrier }}</strong>
                </div>
                <div class="data-row">
                    <span>Airport:</span>
                    <strong>{{ prediction.input_data.airport }}</strong>
                </div>
                <div class="data-row">
                    <span>Year/Month:</span>
                    <strong>{{ prediction.input_data.year }}/{{ prediction.input_data.month }}</strong>
                </div>
                <div class="data-row">
                    <span>Total Delay:</span>
                    <strong class="delay-highlight">{{ "%.2f"|format(prediction.results.arr_delay) }} min</strong>
                </div>
            </div>
            
            <div class="delay-breakdown">
                <h4>Delay Breakdown:</h4>
                <div class="breakdown-grid">
                    <div class="breakdown-item">
                        <span>Carrier:</span>
                        <span>{{ "%.2f"|format(prediction.results.carrier_delay) }} min</span>
                    </div>
                    <div class="breakdown-item">
                        <span>Weather:</span>
                        <span>{{ "%.2f"|format(prediction.results.weather_delay) }} min</span>
                    </div>
                    <div class="breakdown-item">
                        <span>NAS:</span>
                        <span>{{ "%.2f"|format(prediction.results.nas_delay) }} min</span>
                    </div>
                    <div class="breakdown-item">
                        <span>Security:</span>
                        <span>{{ "%.2f"|format(prediction.results.security_delay) }} min</span>
                    </div>
                    <div class="breakdown-item">
                        <span>Late Aircraft:</span>
                        <span>{{ "%.2f"|format(prediction.results.late_aircraft_delay) }} min</span>
                    </div>
                </div>
            </div>
            
            <div class="prediction-actions">
                <a href="{{ url_for('delete_prediction_route', pred_id=prediction.id) }}" 
                   class="btn btn-danger btn-sm" 
                   onclick="return confirm('Are you sure you want to delete this prediction?')">
                    <i class="fas fa-trash"></i> Delete
                </a>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <div class="empty-icon">
            <i class="fas fa-chart-line"></i>
        </div>
        <h3>No Predictions Yet</h3>
        <p>Make your first flight delay prediction to see it here!</p>
        <a href="{{ url_for('input_page') }}" class="btn btn-primary">
            <i class="fas fa-rocket"></i> Make Prediction
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}